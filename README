The "u2up-yocto" Linux distribution build project
=================================================

--------------------------------------------------------------------
Copyright (C) 2018-2019 Samo Pogacnik <samo_pogacnik@t-2.net>
All rights reserved.

The "u2up-yocto" software project is provided under the terms of the
BSD 3-Clause license, which is available in the LICENSE file of this
project.
--------------------------------------------------------------------

Description:
------------
This is an umbrella project using "yocto/poky/openembedded" Linux
distribution build system and recipe sources.

"u2up-yocto" currently builds for three target machines:
- qemux86
- intel-corei7-64
- raspberypi3-64

To add another machine, edit:
"distro-conf/machines-conf".

To add your own layers, edit:
"distro-conf/repos-conf"
and create/edit:
"distro-conf/addons-conf" (see comments at the end of the
"distro-conf/u2up-conf_default").

Howto:
------
To build a Linux distribution image for a selected target, simply
the "distro" command from the project TOPDIR. You need to prepare
your environment configuration file distro-conf/u2up-conf.

Sample commands:
----------------
$ ./distro --help
Usage: distro [MACHINE COMMAND]|[OPTIONS]
 MACHINE := qemux86|intel-corei7-64|raspberrypi3-64|...
 COMMAND := prepare|bbsh|bitbake [args]
 OPTIONS := {--help|-h}|{--layers}|{--machines}|{--repos}

$ ./distro --layers
distro-u2up: ERROR - Missing configuration file distro-conf/u2up-conf!

distro-u2up: First copy distro-conf/u2up-conf_default into distro-conf/u2up-conf
distro-u2up: and set your own absolute writable path for all your downloads and
distro-u2up: shared sstate-cache in the U2UP_YOCTO_SHARED variable of your new
distro-u2up: distro-conf/u2up-conf configuration file!

./distro --layers
meta
meta-poky
meta-yocto-bsp

$ ./distro qemux86 prepare

$ ./distro qemux86 bbsh

$ ./distro qemux86 bitbake [bb_args]

Default build:
--------------
$ ./distro qemux86 bitbake

Find built images in "u2up/build.qemux86_thud/tmp/deploy/images/qemux86/" for example:
- bzImage -> bzImage--4.14.76+git0+3435617380_2c5caa7e84-r0-qemux86-20181125204414.bin
- bzImage--4.14.76+git0+3435617380_2c5caa7e84-r0-qemux86-20181125204414.bin
- bzImage-qemux86.bin -> bzImage--4.14.76+git0+3435617380_2c5caa7e84-r0-qemux86-20181125204414.bin
- modules--4.14.76+git0+3435617380_2c5caa7e84-r0-qemux86-20181125204414.tgz
- modules-qemux86.tgz -> modules--4.14.76+git0+3435617380_2c5caa7e84-r0-qemux86-20181125204414.tgz
- u2up-image-full-cmdline-qemux86-20181124115145.testdata.json
- u2up-image-full-cmdline-qemux86-20181124231656.testdata.json
- u2up-image-full-cmdline-qemux86-20181125204414.qemuboot.conf
- u2up-image-full-cmdline-qemux86-20181125204414.rootfs.ext4
- u2up-image-full-cmdline-qemux86-20181125204414.rootfs.manifest
- u2up-image-full-cmdline-qemux86-20181125204414.rootfs.tar.bz2
- u2up-image-full-cmdline-qemux86-20181125204414.testdata.json
- u2up-image-full-cmdline-qemux86.ext4 -> u2up-image-full-cmdline-qemux86-20181125204414.rootfs.ext4
- u2up-image-full-cmdline-qemux86.manifest -> u2up-image-full-cmdline-qemux86-20181125204414.rootfs.manifest
- u2up-image-full-cmdline-qemux86.qemuboot.conf -> u2up-image-full-cmdline-qemux86-20181125204414.qemuboot.conf
- u2up-image-full-cmdline-qemux86.tar.bz2 -> u2up-image-full-cmdline-qemux86-20181125204414.rootfs.tar.bz2
- u2up-image-full-cmdline-qemux86.testdata.json -> u2up-image-full-cmdline-qemux86-20181125204414.testdata.json

Prerequisites:
--------------
Check Yocto documentation regarding host HW/SW requirements.

Test run for "qemux86" target:
------------------------------

.../build.qemux86$ runqemu qemux86 nographic bootparams=ttyprintk.tioccons=1


---
End!

